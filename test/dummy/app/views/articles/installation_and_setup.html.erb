<% content_for :breadcrumbs do %>
  <%= render flowbite(:breadcrumb), html: "Home", href: root_path %>
  <%= render flowbite(:breadcrumb), html: "Installation and Setup", href: article_path(:installation_and_setup), active: true %>
<% end %>

<main class="pt-8 pb-16 bg-white lg:pt-16 lg:pb-24 dark:bg-gray-900">
  <div class="flex justify-between px-4 mx-auto">

    <article class="mx-auto w-full max-w-5xl format format-sm format-blue sm:format-base lg:format-lg dark:format-invert">
      <header class="mb-4 lg:mb-6 not-format">
        <address class="flex items-center mb-6 not-italic">
          <div class="inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white">
            <img class="mr-4 w-16 h-16 rounded-full" src="https://pbs.twimg.com/profile_images/1577505899664625666/jqHYopAl_400x400.jpg" alt="Nate Hopkins">
            <div>
              <a href="#" rel="author" class="text-xl font-bold text-gray-900 dark:text-white">Nate Hopkins (hopsoft)</a>
              <p class="text-base font-light text-gray-500 dark:text-gray-400">Software Writer, Creator of TurboReflex</p>
              <p class="text-base font-light text-gray-500 dark:text-gray-400"><time pubdate datetime="2022-11-14" title="November 14th, 2022">Nov. 14th, 2022</time></p>
            </div>
          </div>
        </address>
        <h1 id="install" class="mt-14 mb-4 text-3xl font-extrabold leading-tight text-gray-900 lg:mb-6 lg:text-4xl dark:text-white scroll-mt-24">
          Installation and Setup
          <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#install", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
        </h1>
      </header>

      <p class="lead">
        How to install and configure TurboReflex in your Rails/Hotwire app.
      </p>

      <%= render flowbite(:alert), type: :dark, class: "flex items-center mt-12 mb-16" do %>
        <%= render heroicon(:information_circle), class: "w-6 h-6 mr-2" %>
        TurboReflex has a <%= link_to "peer dependency", "https://classic.yarnpkg.com/lang/en/docs/dependency-types/#toc-peerdependencies", class: css("flowbite.link.default", "mx-2") %>
        on <%= link_to "TurboReady", "https://turboready.reflexready.com/", class: css("flowbite.link.default", "mx-2") %>
        which means that TurboReady must also be installed and configured.
      <% end %>

      <h3 id="gem" class="opacity-70 scroll-mt-24">
        First add the GEMs to the project
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#gem", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h3>
      <p>
        <%= render component(:code), language: :shell, class: "text-sm", source_path: "app/views/articles/installation_and_setup/bundle.sh", path: "In the terminal", erb: true %>
        <%= render component(:code), language: :ruby, class: "text-sm", source_path: "app/views/articles/installation_and_setup/Gemfile", path: "Gemfile", erb: true %>
      </p>

      <h3 id="npm" class="opacity-70 scroll-mt-24">
        Next add the NPM packages to your package.json file
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#npm", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h3>
      <p>
        <%= render component(:code), language: :shell, class: "text-sm", source_path: "app/views/articles/installation_and_setup/yarn.sh", path: "In the terminal", erb: true %>
        <%= render component(:code), language: :json, class: "text-sm", source_path: "app/views/articles/installation_and_setup/package.json", path: "package.json", erb: true %>
      </p>

      <h3 id="pin" class="opacity-70 scroll-mt-24">
        Alternately, pin the JavaScript packages to your config/importmap.rb file
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#pin", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h3>
      <p>
        <%= render component(:code), language: :shell, class: "text-sm", source_path: "app/views/articles/installation_and_setup/importmap.sh", path: "In the terminal", erb: true %>
        <%= render component(:code), language: :ruby, class: "text-sm", source_path: "app/views/articles/installation_and_setup/importmap.rb", path: "config/importmap.rb", erb: true %>
      </p>

      <h3 id="meta" class="opacity-70 scroll-mt-24">
        Now add the TurboReflex meta tag to your Rails app
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#meta", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h3>
      <p>
        <%= render component(:code), language: :erb, class: "text-sm", source_path: "app/views/articles/installation_and_setup/application.html.erb", path: "app/views/layouts/application.html.erb" %>
      </p>

      <h3 id="import" class="opacity-70 scroll-mt-24">
        Finally import both libraries into your JavaScript app and configure
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#import", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h3>
      <p>
        <%= render component(:code), language: :javascript, class: "text-sm", source_path: "app/views/articles/installation_and_setup/application.js", path: "app/javascript/application.js" %>
      </p>

      <h2 id="advanced" class="mb-4 text-2xl font-extrabold leading-tight text-gray-900 lg:mb-6 lg:text-4xl dark:text-white scroll-mt-24">
        Advanced Configuration
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#advanced", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h2>

      <h3 id="event-delegates" class="opacity-70 scroll-mt-24">
        Event delegation and reflex triggers
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#event-delegates", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h3>
      <p>
        TurboReflex uses <%= link_to "event delegation", "https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#event_delegation", class: css("flowbite.link.default") %>
        to determine what elements can trigger reflexes and when reflexes should be invoked.
      </p>
      <p>
        Use the JavaScript console in a browser to view the default delegates.
        <%= render component(:code), language: :javascript, class: "text-sm", source_path: "app/views/articles/installation_and_setup/delegates.js", path: "in the JavaScript console" %>
      </p>
      <p>
        It's possible to register new delegates and override defaults.
        <%= render component(:code), language: :javascript, class: "text-sm", source_path: "app/views/articles/installation_and_setup/register.js", path: "app/javascript/application.js" %>
      </p>

      <h3 id="schema" class="opacity-70 scroll-mt-24">
        Schema
        <%= link_to render(heroicon(:hashtag), class: "w-auto h-6"), "#schema", class: "opactiy-50 hover:opacity-80 inline-block align-middle" %>
      </h3>
      <p>
        It's possible to customize the schema that TurboReflex uses to identify important element attributes etc...
        <%= render component(:code), language: :javascript, class: "text-sm", source_path: "app/views/articles/installation_and_setup/schema.js", path: "app/javascript/application.js" %>
      </p>
    </article>
  </div>
</main>
